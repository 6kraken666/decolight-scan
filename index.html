
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Decolight Scanner</title>
</head>
<body style="font-family:sans-serif; text-align:center; padding:20px;">
  <h2>Scan Barcode</h2>
  <video id="video" width="100%" height="auto" style="border:1px solid #ccc; border-radius:10px;"></video>
  <br><br>
  <button onclick="startScan()" style="padding:10px 20px; font-size:16px; border:none; border-radius:6px; background-color:#007BFF; color:white;">Start Scanner</button>
  <script type="module">
    import { BrowserMultiFormatReader } from 'https://cdn.jsdelivr.net/npm/@zxing/library@0.19.1/esm/index.min.js';

    const codeReader = new BrowserMultiFormatReader();

    window.startScan = async function () {
      try {
        const result = await codeReader.decodeOnceFromVideoDevice(undefined, 'video');
        if (result) {
          const code = result.getText();
          window.location.href = 'http://decolite1.dyndns.org:8000/store/index.asp?Code=' + encodeURIComponent(code);
        }
      } catch (err) {
        alert("Camera error: " + err.message);
      }
    };
  </script>
</body>
</html>
